# 🔄 ワークフロー管理ガイド

ユーザーが忘れても、自動的に次のステップを案内する仕組みです。

## 使い方

### 🆕 新しい記事を書く

```bash
/qiita-workflow start
```

または、最初から直接

```bash
/qiita-topics-from-slack
```

**何が起こるか:**
1. 記事ネタを探す
2. トピックを選ぶ
3. 「次のステップ: 下書き執筆」と自動提案
4. 「はい」を選ぶと `/qiita-draft` が自動実行

### ▶️ 中断した記事を再開

```bash
/qiita-workflow continue
```

**何が起こるか:**
1. 最後に編集していた記事を自動検出
2. 次のステップを自動提案（例: 「文体チェックが残っています」）
3. 「はい」を選ぶと `/qiita-review` が自動実行

### 📊 進捗状況を確認

```bash
/qiita-workflow
```

または

```bash
/qiita-workflow status
```

**何が起こるか:**
- すべての記事の進捗状況を表示
- 次にやるべきことを提案

## ワークフローステップ

```
┌─────────────────────────────────────┐
│ 1️⃣  idea (アイディア)                │
│    → /qiita-topics-from-slack       │
│    → /qiita-draft（候補選択）        │
└─────────────────────────────────────┘
              ↓ 自動提案
┌─────────────────────────────────────┐
│ 2️⃣  draft (下書き)                   │
│    → /qiita-draft [トピック]         │
└─────────────────────────────────────┘
              ↓ 自動提案
┌─────────────────────────────────────┐
│ 3️⃣  review (推敲)                    │
│    → /qiita-review                  │
└─────────────────────────────────────┘
              ↓ 自動提案
┌─────────────────────────────────────┐
│ 4️⃣  publish (出稿)                   │
│    → /qiita-publish                 │
└─────────────────────────────────────┘
              ↓ 自動移動
┌─────────────────────────────────────┐
│ 5️⃣  completed (完了)                 │
│    → published/ フォルダに保存       │
└─────────────────────────────────────┘
```

## 自動提案の例

### 例1: 下書き完了後

```
✅ 下書きが完成しました！
📁 11_Qiita/drafts/2026-02-17_Next.jsの話.md

📝 次のステップ: 文体チェック
→ `/qiita-review` を実行しますか？

[はい] [後で]
```

### 例2: 推敲完了後

```
✅ 文体チェックが完了しました！

📝 次のステップ: 出稿
→ `/qiita-publish` を実行しますか？

[今すぐ投稿] [下書き保存] [後で]
```

### 例3: 公開完了後

```
✅ 記事を投稿しました！ 🎉
🔗 https://qiita.com/your-username/items/xxxxx

📝 次にやること:
1. 新しい記事を書く
2. 下書き中の記事を続ける
3. 休憩する 😊
```

## フロントマターの管理

各記事のフロントマターに `workflow_step` が自動追加されます。

```yaml
---
title: "Next.jsのサーバーコンポーネントでハマった話"
tags: [Next.js, React, JavaScript]
status: draft
workflow_step: review  # ← 自動管理
created: 2026-02-17
updated: 2026-02-17
qiita_url: ""
---
```

**workflow_step の値:**
- `idea` - アイディアのみ（下書き未作成）
- `draft` - 下書き完了（推敲前）
- `review` - 推敲完了（出稿前）
- `completed` - 出稿完了

## 実際の使用例

### シナリオ1: ゼロから記事を書く

```bash
# ステップ1: 新しい記事を開始
/qiita-workflow start
→ 「Slackから記事ネタを探す」を選択

# ステップ2: 記事ネタを探す（自動実行）
/qiita-topics-from-slack
→ トピックを選択
→ 「次: 下書き執筆」と提案される

# ステップ3: 下書きを書く（自動実行）
/qiita-draft [選んだトピック]
→ インタビューに答える
→ 「次: 文体チェック」と提案される

# ステップ4: 推敲（自動実行）
/qiita-review
→ 修正を確認
→ 「次: 出稿」と提案される

# ステップ5: 出稿（自動実行）
/qiita-publish
→ 「Claude Codeから直接投稿」を選択
→ 完了！
```

**実際のコマンド数: 1つだけ！**
```bash
/qiita-workflow start
```

あとは提案に「はい」と答えるだけ。

### シナリオ2: 中断した記事を再開

```bash
# 昨日下書きを書いて、途中で止めた場合

/qiita-workflow continue
→ 「Next.jsの話: 文体チェックが残っています」
→ 「はい」を選ぶ
→ /qiita-review が自動実行
→ 完了したら「次: 出稿」と提案
```

### シナリオ3: 進捗確認

```bash
/qiita-workflow status

# 出力例:
# 📊 Qiita記事統計
# - アイディアのみ: 2件
# - 下書き完了: 1件
# - 推敲完了: 1件 ← 出稿できる！
# - 公開済み: 5件
#
# 📝 次にやるべきこと:
# 推敲完了の記事があります！
# → /qiita-publish で出稿しましょう
```

## メリット

### 😊 ユーザーが忘れても大丈夫

- 次に何をすべきか自動提案
- 中断しても、続きから再開できる
- 進捗状況が一目でわかる

### ⚡ スピードアップ

- コマンドを覚える必要なし
- 提案に「はい」と答えるだけ
- ワンコマンドで全ステップを実行可能

### 📊 進捗管理

- どの記事がどの段階か把握
- 統計情報で生産性を可視化
- 完了した記事を自動整理

## トラブルシューティング

### ワークフローが認識されない

記事のフロントマターに `workflow_step` がない場合:

```bash
/qiita-workflow
→ 自動的に修正を提案
```

### 次のステップが表示されない

各Skillの最後で自動提案されます。もし表示されない場合:

```bash
/qiita-workflow
→ 現在の状況と次のステップを確認
```

## まとめ

**覚えるコマンドは1つだけ:**

```bash
/qiita-workflow start
```

あとは自動的に案内されます！ 🚀
